# Battlefield Simulator

一个基于C语言的战场模拟器，支持地形生成、装备部署和战斗模拟。

## 功能特点

- 随机地形生成系统
  - 支持平原、山地、森林、水域和道路等多种地形
  - 地形影响装备移动速度
  - 可自定义地形生成参数

- 装备系统
  - 多种装备类型（坦克、飞机、火炮等）
  - 装备受地形影响
  - 装备间交互系统

- 地图系统
  - 支持随机生成地图
  - 支持从本地文件加载地图
  - 地图预览功能

## 编译和运行

### 环境要求
- C编译器（如GCC）
- Windows或Unix-like系统

### 编译步骤
```bash
# 编译项目
gcc -o battlefield main.c battlefield.c equipment.c -lm

# 运行程序
./battlefield
```

## 地图文件格式

地图文件应保存在`map`目录下，使用`.txt`格式。地图文件中的字符含义：
- `.` : 平原
- `^` : 山地
- `*` : 森林
- `~` : 水域
- `=` : 道路

## 装备类型

1. 坦克 - 基础战斗单位
2. 飞机 - 空中单位，不受地形影响
3. 自行火炮 - 远程火力单位
4. 导弹发射塔 - 固定防御设施
5. 单兵冲锋枪 - 轻型步兵单位
6. 射击塔 - 固定防御设施
7. 栅栏 - 防御工事
8. 装甲车 - 机动单位
9. 重型机枪 - 火力支援单位
10. 反坦克炮 - 反装甲单位
11. 指挥部 - 核心建筑

## 地形影响

不同地形对装备移动速度的影响：
- 平原：正常速度
- 山地：降低速度
- 森林：中等减速
- 水域：无法通过（飞行单位除外）
- 道路：提升速度

## 许可证

MIT License

## 游戏规则

1. 程序启动后，会首先让红方部署装备，然后让蓝方部署装备
2. 每方有固定的预算，不能超出预算
3. 装备只能部署在己方半场
4. 部署完成后，战斗自动开始
5. 当一方全部装备被摧毁时，判定另一方胜利

## 装备说明

装备类型定义在`equipment_types.txt`文件中，包含以下信息：
- 装备类型ID
- 装备名称
- 装备造价
- 最高生命值
- 最高行进速度
- 最大打击半径
- 最大装弹量
- 最高射速
- 是否可以飞行

装备之间的交互特性定义在`equipment_interactions.txt`文件中，包含：
- 攻击方装备类型ID
- 防守方装备类型ID
- 单发伤害值
- 射击精确度

## 战场显示说明

- 红方装备使用大写字母表示：T(坦克)、A(飞机)、C(火炮)等
- 蓝方装备使用小写字母表示：t(坦克)、a(飞机)、c(火炮)等
- 栅栏使用#表示
- 被摧毁的装备使用x表示

## 地形生成说明

战场地形由多种地形类型组成，每种地形都有其特定的生成参数和特性：

### 基础地形概率
- 平原 (50%): 基础地形，适合大多数装备移动和作战
- 山地 (35%): 提供战略高地，影响视野和移动
- 森林 (10%): 提供掩护，影响视野和移动
- 水域 (10%): 不可通行区域，形成自然屏障
- 道路 (10%): 提供快速移动通道

### 地形过渡参数
- 平原转换阈值: 5 (需要5个相邻平原才会转换)
- 山地转换阈值: 3 (需要3个相邻山地才会转换)
- 森林转换阈值: 4 (需要4个相邻森林才会转换)
- 地形转换概率: 35% (相邻地形转换的概率)

### 湖泊生成参数
- 最小间距: 12格 (湖泊之间的最小距离)
- 湖泊大小: 4x4格 (单个湖泊的尺寸)
- 生成概率: 15% (在合适位置生成湖泊的概率)
- 平原检查半径: 2格 (生成湖泊时检查周围平原的范围)

### 道路生成参数
- 节点间距: 15格 (道路节点之间的间距)
- 最大道路长度: 20格 (单条道路的最大长度)
- 额外道路概率: 5% (生成额外连接道路的概率)
- 最小平原半径: 3格 (道路周围需要的最小平原范围)

### 地形显示
- 平原: 绿色背景的'.'
- 山地: 灰色背景的'^'
- 森林: 绿色前景的'*'
- 水域: 蓝色背景的'~'
- 道路: 黄色背景的'='

## 代码文件说明

- `main.c`: 程序入口点
- `battlefield.h/c`: 战场相关定义和实现
- `equipment.h/c`: 装备相关定义和实现
- `simulation.h/c`: 模拟逻辑相关定义和实现
- `equipment_types.txt`: 装备类型数据
- `equipment_interactions.txt`: 装备交互数据 


 by Gskyer